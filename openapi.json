{"openapi":"3.1.0","info":{"title":"BITA Backtesting API","description":"A high-performance financial backtesting API with NLP integration.","version":"0.1.0"},"paths":{"/api/v1/backtest":{"post":{"summary":"Run Backtest","operationId":"run_backtest_api_v1_backtest_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BacktestRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BacktestResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/backtest-prompt":{"post":{"summary":"Run Backtest Prompt","operationId":"run_backtest_prompt_api_v1_backtest_prompt_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PromptIn"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BacktestResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Root","description":"Root endpoint with basic API information.","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"summary":"Health Check","description":"Health check endpoint for monitoring.","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"BacktestRequest":{"properties":{"calendar_rules":{"$ref":"#/components/schemas/CalendarRules"},"portfolio_creation":{"$ref":"#/components/schemas/PortfolioCreation"},"weighting_scheme":{"$ref":"#/components/schemas/WeightingScheme"}},"type":"object","required":["calendar_rules","portfolio_creation","weighting_scheme"],"title":"BacktestRequest"},"BacktestResponse":{"properties":{"execution_time":{"type":"number","title":"Execution Time","description":"Total execution time"},"weights":{"additionalProperties":{"additionalProperties":{"type":"number"},"type":"object"},"type":"object","title":"Weights","description":"Portfolio weights by date"},"metadata":{"$ref":"#/components/schemas/PerformanceMetrics","description":"Performance metadata"},"warnings":{"items":{"type":"string"},"type":"array","title":"Warnings","description":"Execution warnings"}},"type":"object","required":["execution_time","weights","metadata"],"title":"BacktestResponse","example":{"execution_time":1.234,"metadata":{"average_assets_per_rebalance":2.5,"execution_time":1.234,"rebalance_dates_processed":2,"strategy":{"calendar":"Quarterly","filter":"TopN","weighting":"Equal"},"total_rebalance_dates":4},"warnings":["Some warning message"],"weights":{"2024-03-31":{"AAPL":0.5,"MSFT":0.5},"2024-06-30":{"AMZN":0.33,"GOOG":0.33,"TSLA":0.34}}}},"CalendarRules":{"properties":{"rule_type":{"type":"string","const":"Quarterly","title":"Rule Type","default":"Quarterly"},"initial_date":{"type":"string","format":"date","title":"Initial Date","description":"Start date for backtest"}},"type":"object","required":["initial_date"],"title":"CalendarRules"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"PerformanceMetrics":{"properties":{"execution_time":{"type":"number","title":"Execution Time","description":"Total execution time in seconds"},"rebalance_dates_processed":{"type":"integer","title":"Rebalance Dates Processed","description":"Number of successful rebalance dates"},"total_rebalance_dates":{"type":"integer","title":"Total Rebalance Dates","description":"Total rebalance dates attempted"},"average_assets_per_rebalance":{"type":"number","title":"Average Assets Per Rebalance","description":"Average assets per rebalance period"},"strategy":{"$ref":"#/components/schemas/StrategySummary","description":"Strategy configuration summary"}},"type":"object","required":["execution_time","rebalance_dates_processed","total_rebalance_dates","average_assets_per_rebalance","strategy"],"title":"PerformanceMetrics"},"PortfolioCreation":{"properties":{"filter_type":{"type":"string","const":"TopN","title":"Filter Type","default":"TopN"},"n":{"type":"integer","title":"N","description":"Number of top assets to select","default":10},"data_field":{"type":"string","title":"Data Field","description":"Field for ranking","default":"market_capitalization"}},"type":"object","title":"PortfolioCreation"},"PromptIn":{"properties":{"prompt":{"type":"string","title":"Prompt","description":"Natural language prompt for backtest"}},"type":"object","required":["prompt"],"title":"PromptIn"},"StrategySummary":{"properties":{"calendar":{"type":"string","title":"Calendar"},"filter":{"type":"string","title":"Filter"},"weighting":{"type":"string","title":"Weighting"}},"type":"object","required":["calendar","filter","weighting"],"title":"StrategySummary"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"WeightingScheme":{"properties":{"weighting_type":{"type":"string","const":"Equal","title":"Weighting Type","default":"Equal"}},"type":"object","title":"WeightingScheme"}}}}