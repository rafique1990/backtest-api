{
	"info": {
		"name": "Bitacore Backtest API",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "1. Success Scenarios",
			"item": [
				{
					"name": "Market Cap - Top 5 (Standard)",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"calendar_rules\": {\n        \"rule_type\": \"Quarterly\",\n        \"initial_date\": \"2024-01-01\"\n    },\n    \"portfolio_creation\": {\n        \"filter_type\": \"TopN\",\n        \"n\": 5,\n        \"data_field\": \"market_capitalization\"\n    },\n    \"weighting\": {\n        \"weighting_type\": \"Equal\"\n    }\n}",
							"options": { "raw": { "language": "json" } }
						},
						"url": { "raw": "{{base_url}}/api/backtest", "host": ["{{base_url}}"], "path": ["api", "backtest"] }
					}
				},
				{
					"name": "Volume - Top 50",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"calendar_rules\": {\n        \"rule_type\": \"Quarterly\",\n        \"initial_date\": \"2024-01-01\"\n    },\n    \"portfolio_creation\": {\n        \"filter_type\": \"TopN\",\n        \"n\": 50,\n        \"data_field\": \"volume\"\n    },\n    \"weighting\": {\n        \"weighting_type\": \"Equal\"\n    }\n}",
							"options": { "raw": { "language": "json" } }
						},
						"url": { "raw": "{{base_url}}/api/backtest", "host": ["{{base_url}}"], "path": ["api", "backtest"] }
					}
				}
			]
		},
		{
			"name": "2. Edge Cases & Validation",
			"item": [
				{
					"name": "Edge Case: Start Date in Past (1999)",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"calendar_rules\": {\n        \"rule_type\": \"Quarterly\",\n        \"initial_date\": \"1999-01-01\"\n    },\n    \"portfolio_creation\": {\n        \"filter_type\": \"TopN\",\n        \"n\": 10,\n        \"data_field\": \"market_capitalization\"\n    },\n    \"weighting\": {\n        \"weighting_type\": \"Equal\"\n    }\n}",
							"options": { "raw": { "language": "json" } }
						},
						"url": { "raw": "{{base_url}}/api/backtest", "host": ["{{base_url}}"], "path": ["api", "backtest"] }
					}
				},
				{
					"name": "Edge Case: Start Date in Future (2050)",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"calendar_rules\": {\n        \"rule_type\": \"Quarterly\",\n        \"initial_date\": \"2050-01-01\"\n    },\n    \"portfolio_creation\": {\n        \"filter_type\": \"TopN\",\n        \"n\": 10,\n        \"data_field\": \"market_capitalization\"\n    },\n    \"weighting\": {\n        \"weighting_type\": \"Equal\"\n    }\n}",
							"options": { "raw": { "language": "json" } }
						},
						"url": { "raw": "{{base_url}}/api/backtest", "host": ["{{base_url}}"], "path": ["api", "backtest"] }
					}
				},
				{
					"name": "Edge Case: Top N > Available (Top 10000)",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"calendar_rules\": {\n        \"rule_type\": \"Quarterly\",\n        \"initial_date\": \"2024-01-01\"\n    },\n    \"portfolio_creation\": {\n        \"filter_type\": \"TopN\",\n        \"n\": 10000,\n        \"data_field\": \"market_capitalization\"\n    },\n    \"weighting\": {\n        \"weighting_type\": \"Equal\"\n    }\n}",
							"options": { "raw": { "language": "json" } }
						},
						"url": { "raw": "{{base_url}}/api/backtest", "host": ["{{base_url}}"], "path": ["api", "backtest"] }
					}
				},
				{
					"name": "Edge Case: Invalid Data Field",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"calendar_rules\": {\n        \"rule_type\": \"Quarterly\",\n        \"initial_date\": \"2024-01-01\"\n    },\n    \"portfolio_creation\": {\n        \"filter_type\": \"TopN\",\n        \"n\": 5,\n        \"data_field\": \"unicorn_power\"\n    },\n    \"weighting\": {\n        \"weighting_type\": \"Equal\"\n    }\n}",
							"options": { "raw": { "language": "json" } }
						},
						"url": { "raw": "{{base_url}}/api/backtest", "host": ["{{base_url}}"], "path": ["api", "backtest"] }
					}
				}
			]
		},
		{
			"name": "3. NLP Prompts",
			"item": [
				{
					"name": "Prompt: Simple",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"prompt\": \"Run a backtest starting from 2024-01-01\"\n}",
							"options": { "raw": { "language": "json" } }
						},
						"url": { "raw": "{{base_url}}/api/backtest-prompt", "host": ["{{base_url}}"], "path": ["api", "backtest-prompt"] }
					}
				},
				{
					"name": "Prompt: Complex",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"prompt\": \"Run backtest with top 15 securities by adtv_3_month starting 2023-06-01\"\n}",
							"options": { "raw": { "language": "json" } }
						},
						"url": { "raw": "{{base_url}}/api/backtest-prompt", "host": ["{{base_url}}"], "path": ["api", "backtest-prompt"] }
					}
				}
			]
		},
		{
			"name": "4. System",
			"item": [
				{
					"name": "Health Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": { "raw": "{{base_url}}/health", "host": ["{{base_url}}"], "path": ["health"] }
					}
				}
			]
		},
		{
			"name": "5. Data & Security",
			"item": [
				{
					"name": "Get Statistics (Valid)",
					"request": {
						"method": "GET",
						"header": [],
						"url": { "raw": "{{base_url}}/api/data/fields/market_capitalization/statistics", "host": ["{{base_url}}"], "path": ["api", "data", "fields", "market_capitalization", "statistics"] }
					}
				},
				{
					"name": "Security: Path Traversal Attack (../)",
					"request": {
						"method": "GET",
						"header": [],
						"url": { "raw": "{{base_url}}/api/data/fields/..%2F..%2Fetc%2Fpasswd/statistics", "host": ["{{base_url}}"], "path": ["api", "data", "fields", "..%2F..%2Fetc%2Fpasswd", "statistics"] }
					}
				},
				{
					"name": "Security: SQL Injection Chars (; DROP)",
					"request": {
						"method": "GET",
						"header": [],
						"url": { "raw": "{{base_url}}/api/data/fields/market_cap;DROP/statistics", "host": ["{{base_url}}"], "path": ["api", "data", "fields", "market_cap;DROP", "statistics"] }
					}
				},
				{
					"name": "Error: File Not Found",
					"request": {
						"method": "GET",
						"header": [],
						"url": { "raw": "{{base_url}}/api/data/fields/non_existent_field/statistics", "host": ["{{base_url}}"], "path": ["api", "data", "fields", "non_existent_field", "statistics"] }
					}
				}
			]
		}
	]
}